\begin{figure}[h]
\centering
\begin{tikzpicture}[scale=0.85, transform shape]
    % Define styles
    \tikzset{
        domain/.style={draw, rounded corners, fill=blue!10, minimum width=6cm, minimum height=2.5cm, text width=5.8cm, align=center},
        knowledge/.style={draw, fill=yellow!20, rounded corners, minimum width=1.2cm, minimum height=0.8cm},
        invariant/.style={draw, fill=red!20, rounded corners, minimum width=1.2cm, minimum height=0.8cm},
        arrow/.style={->, >=latex, thick},
        dashed/.style={dashed, thick},
        extraction/.style={draw, fill=green!15, rounded corners, minimum width=7cm, minimum height=2cm}
    }
    
    % Domain 1
    \node[domain] (d1) at (0,5) {Domain $\mathcal{D}_1$};
    \node[knowledge] (k11) at (-2,5.5) {$K_{1,1}$};
    \node[knowledge] (k12) at (-0.5,5.5) {$K_{1,2}$};
    \node[knowledge] (k13) at (1,5.5) {$K_{1,3}$};
    \node[knowledge] (k14) at (2.5,5.5) {$K_{1,4}$};
    \node[invariant, dashed] (i1) at (0,4.5) {$I_1$};
    
    % Domain 2
    \node[domain] (d2) at (0,1.5) {Domain $\mathcal{D}_2$};
    \node[knowledge] (k21) at (-2,2) {$K_{2,1}$};
    \node[knowledge] (k22) at (-0.5,2) {$K_{2,2}$};
    \node[knowledge] (k23) at (1,2) {$K_{2,3}$};
    \node[knowledge] (k24) at (2.5,2) {$K_{2,4}$};
    \node[invariant, dashed] (i2) at (0,1) {$I_1$};
    
    % Domain 3
    \node[domain] (d3) at (9,5) {Domain $\mathcal{D}_3$};
    \node[knowledge] (k31) at (7,5.5) {$K_{3,1}$};
    \node[knowledge] (k32) at (8.5,5.5) {$K_{3,2}$};
    \node[knowledge] (k33) at (10,5.5) {$K_{3,3}$};
    \node[knowledge] (k34) at (11.5,5.5) {$K_{3,4}$};
    \node[invariant, dashed] (i3) at (9,4.5) {$I_1$};
    
    % Domain 4
    \node[domain] (d4) at (9,1.5) {Domain $\mathcal{D}_4$};
    \node[knowledge] (k41) at (7,2) {$K_{4,1}$};
    \node[knowledge] (k42) at (8.5,2) {$K_{4,2}$};
    \node[knowledge] (k43) at (10,2) {$K_{4,3}$};
    \node[knowledge] (k44) at (11.5,2) {$K_{4,4}$};
    \node[invariant, dashed] (i4) at (9,1) {$I_1$};
    
    % Similarity measures
    \draw[dashed] (i1) -- (i2) node[midway, left] {$\Sigma = 0.94$};
    \draw[dashed] (i1) -- (i3) node[midway, above] {$\Sigma = 0.92$};
    \draw[dashed] (i2) -- (i4) node[midway, above] {$\Sigma = 0.91$};
    \draw[dashed] (i3) -- (i4) node[midway, right] {$\Sigma = 0.96$};
    
    % Extraction process
    \node[extraction] (extract) at (4.5,-1.5) {Universal Principle Extraction};
    \node[invariant] (p1) at (4.5,-2) {$\mathcal{P}_1$};
    
    % Arrows to extraction
    \draw[arrow] (i1) -- (4.5,-0.5) -- (extract);
    \draw[arrow] (i2) -- (4.5,-0.5) -- (extract);
    \draw[arrow] (i3) -- (4.5,-0.5) -- (extract);
    \draw[arrow] (i4) -- (4.5,-0.5) -- (extract);
    
    % Legend
    \node[knowledge, scale=0.8] at (12.5,-1) {Domain Knowledge};
    \node[invariant, scale=0.8] at (12.5,-1.8) {Invariant Structure};
    \node[right=0.2cm of extract, scale=0.8] {Abstraction Process};
    
    % Title
    \node at (4.5,7) {\Large\textbf{Invariant Structure Identification Process}};
    
\end{tikzpicture}
\caption{The invariant structure identification process across multiple domains. Similar structural patterns (shown as dashed boxes) are identified across domains despite different knowledge manifestations. High similarity scores ($\Sigma$) between these structures indicate they represent the same underlying universal principle.}
\label{fig:invariant_identification}
\end{figure}